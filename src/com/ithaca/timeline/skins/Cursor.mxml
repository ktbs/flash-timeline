<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/halo"
			   xmlns:tl="com.ithaca.timeline.*" 
			   creationComplete="creationCompleteHandler(event)"  width="1" >
			   	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>

	<fx:Script>	<![CDATA[
			import com.ithaca.timeline.Timeline;
			import com.ithaca.timeline.TimeToolTip;
			import flash.events.MouseEvent;
			import flash.geom.Point;
			import mx.managers.ToolTipManager;
			import mx.controls.ToolTip;
			import mx.events.ToolTipEvent;
			import mx.formatters.DateFormatter;
			
			[Bindable]
			public var timeline : Timeline
			
			public var withToolTip : Boolean = false;
			
			private	var dateFormatter : DateFormatter;
			
			protected function creationCompleteHandler( event : Event ) : void
			{	
				dateFormatter  = new DateFormatter();
				dateFormatter.formatString = "JJ:NN:SS";
				if ( withToolTip )
					cursor.addEventListener(MouseEvent.MOUSE_MOVE, onToolTipShow );							
			}
			
			protected function onToolTipShow( event : Event ) : void
			{
				tt.visible = true;
				if ( timeline.isRelativeTimeMode )
					tt.text 	= dateFormatter.format( new Date(  timeline.currrentRelativeTime ).toUTCString() );
				else
					tt.text 	= dateFormatter.format( new Date(  timeline.currentTime ) );
			}
		]]> 
	</fx:Script>
	<s:Group  id="cursor" width="100%" height="100%"  mouseOut="{tt.visible=false}">
		<s:Rect width="1"  height="100%"  >					
			 <s:stroke>
				<s:SolidColorStroke color="0xFF0000" weight="1"/>
			 </s:stroke>	
		</s:Rect>
	</s:Group>
	<tl:TimeToolTip id="tt" x="{-tt.width/2 -1 }" y="{cursor.y - tt.height  }" visible="false"  borderColor="0xFF0000" />
</s:Group>